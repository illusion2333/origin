# 隐私计算环境功能梳理

## 隐私计算环境初始化部分

| 模块       | 功能            | 负责人             | 状态  |
| ---------- | --------------- | ------------------ | ----- |
| Gateway    | Init Enclave    | 高玉堂             | Ready |
| Enclave    | 生成Quote       | 高玉堂             | Ready |
| Gateway    | GetQuote        | 高玉堂             | Ready |
| Enclave    | 生成上链证书    | 张韜、万明超、玉堂 |       |
| Chainmaker | Enclave证书验证 | 张韜、万明超       |       |
| Gateway    | 证书上链        | 韩天乐             |       |

## 隐私计算执行部分

| 模块    | 功能                                                         | 负责人 | 状态 |
| ------- | ------------------------------------------------------------ | ------ | ---- |
| Gateway | 请求接口定义和实现：加密之后的隐私数据、隐私数据Hash、Contract Name、Code Hash、证书（或者证书Id）、签名（隐私数据哈希的签名） | 韩天乐 |      |
| Gateway | Get Contract(Verify User，使用用户证书（或证书Id + 隐私数据hash + 签名进行验证) 、身份信息 | 韩天乐 |      |
| Enclave | 请求接口定义和实现：加密之后的隐私数据、隐私数据Hash、Contract Name、Byte Code、Code Hash、证书（证书Id）、签名（隐私数据哈希的签名） | 玉堂   |      |
| Enclave | 解密隐私数据                                                 | 张韜   |      |
| Enclave | 执行Contract                                                 | 玉堂   |      |
| Enclave | 调用网关查询链数据                                           | 玉堂   |      |
| Gateway | 和链交互从链上查询数据                                       | 韩天乐 |      |
| Enclave | 生成读写集（集成simcontext）                                 | 玉堂   |      |
| Enclave | 调用网关提交计算结果（code、result、RWSet、gas、event、证书、签名） | 玉堂   |      |
| Gateway | 提交计算结果（code、result、RWSet、gas、event、证书、签名）  | 韩天乐 |      |

## 其他

| 模块         | 功能                             | 负责人 | 状态 |
| ------------ | -------------------------------- | ------ | ---- |
| Gateway      | 使用Go语言，通过Cgo引用C语言代码 | 韩天乐 |      |
| 系统合约     |                                  | 丁有振 |      |
| 合约内部加密 |                                  | 张韜   |      |
| SDK解密      |                                  | 张韜   |      |

## 问题

网关和链交互时身份定义（作为链的一个组织成员？）